# Create Planet-States

# Create Egalitarian Planet-State. Called from planet scope.
create_planet_state_egalitarian = {
	# Set Planet Size and Class
	prevent_anomaly = yes
	set_planet_size = 25
	change_pc = pc_city

	# Create Species and Country
	create_species = {
		name = random
		class = random_non_machine
		portrait = random
		homeworld = THIS
		traits = {
			trait = trait_venerable
			trait = trait_erudite
		}
	}
	create_country = {
		name = random
		type = planet_state
		authority = "auth_democratic"
		civics = {
			civic = civic_planet_state
			civic = civic_idealistic_foundation
			civic = civic_shared_burden
		}
		species = last_created
		flag = random
		ethos = {
			ethic = ethic_fanatic_egalitarian
		}
		ignore_initial_colony_error = yes
	}

	# Create Station and Leader
	last_created_country = {
		set_country_flag = ps_egalitarian
		save_event_target_as = target_ps_egalitarian
		create_fleet = {
			name = "NAME_PS_Egalitarian_Fleet"
			settings = { spawn_debris = no }
			effect = {
				set_owner = prev
				create_ship = {
					name = random
					design = "NAME_Planet_State_Station"
					graphical_culture = prev
				}
				set_location = {
					target = prevprev
					angle = random
					distance = 15
				}
			}
		}
		create_leader = {
			class = ruler
			species = prev
			name = random
			skill = 5
		}
		set_leader = last_created_leader
	}

	# Set Planet-State as Owner of the planet
	set_owner = event_target:target_ps_egalitarian
	set_controller = event_target:target_ps_egalitarian
	set_capital = yes

	# Add Builings, Districts, Pops
	add_building = building_planet_state_capitol
	add_building = building_hall_judgment
	add_building = building_anti_matter_reactor
	add_building = building_hydroponics_farms_complex
	add_building = building_hydroponics_farms_complex
	add_building = building_mineral_purification_complex
	add_building = building_mineral_purification_complex
	add_building = building_multidimensional_printers
	add_building = building_multidimensional_printers
	add_building = building_leisure_complex
	add_building = building_leisure_complex
	add_building = building_distillation_complex
	add_building = building_chemical_complex
	add_building = building_synthesizers_complex
	add_building = building_galactic_stock_exchange
	add_building = building_autocurating_vault
	while = {
		count = 25
		add_district = district_arcology_housing
	}
	while = {
		count = 400
		create_pop = {
			species = owner_main_species
			ethos = { ethic = ethic_fanatic_egalitarian }
		}
	}

	event_target:target_ps_egalitarian = {
		set_policy = {
			policy = food_policy
			option = food_policy_generous
			cooldown = no
		}
		set_policy = {
			policy = purge
			option = purge_not_allowed
			cooldown = no
		}
		set_policy = {
			policy = resettlement
			option = resettlement_not_allowed
			cooldown = no
		}
	}
}

# Create Authoritarian Planet-State. Called from planet scope.
create_planet_state_authoritarian = {
	# Set Planet Size and Class
	prevent_anomaly = yes
	set_planet_size = 25
	change_pc = pc_nuked
	clear_deposits = yes
	add_deposit = d_searing_desert
	add_deposit = d_searing_desert
	add_deposit = d_underwater_vent
	add_deposit = d_underwater_vent
	add_deposit = d_submerged_ore_veins
	add_deposit = d_submerged_ore_veins
	add_deposit = d_submerged_ore_veins
	add_deposit = d_submerged_ore_veins
	add_deposit = d_lichen_fields
	add_deposit = d_fungal_caves
	add_deposit = d_fungal_caves
	add_modifier = { modifier = slave_colony days = -1 }

	# Create Species and Country
	create_species = {
		name = random
		class = random_non_machine
		portrait = random
		homeworld = THIS
		traits = {
			trait = trait_survivor
			trait = trait_robust
			trait = trait_decadent
		}
	}
	last_created_species = {
		save_event_target_as = ps_authoritarian_main_species
	}
	create_country = {
		name = random
		type = planet_state
		authority = "auth_imperial"
		civics = {
			civic = civic_planet_state
			civic = civic_slaver_guilds
			civic = civic_feudal_realm
		}
		species = last_created
		flag = random
		ethos = {
			ethic = ethic_fanatic_authoritarian
		}
		ignore_initial_colony_error = yes
	}

	# Create Station and Leader
	last_created_country = {
		set_country_flag = ps_authoritarian
		save_event_target_as = target_ps_authoritarian
		create_fleet = {
			name = "NAME_PS_Authoritarian_Fleet"
			settings = { spawn_debris = no }
			effect = {
				set_owner = prev
				create_ship = {
					name = random
					design = "NAME_Planet_State_Station"
					graphical_culture = prev
				}
				set_location = {
					target = prevprev
					angle = random
					distance = 15
				}
			}
		}
		create_leader = {
			class = ruler
			species = prev
			name = random
			skill = 5
		}
		set_leader = last_created_leader
	}

	# Set Planet-State as Owner of the planet
	set_owner = event_target:target_ps_authoritarian
	set_controller = event_target:target_ps_authoritarian
	set_capital = yes

	# Add Builings, Districts, Pops
	add_building = building_slave_major_capital
	add_building = building_anti_matter_reactor
	add_building = building_hydroponics_farms_complex
	add_building = building_hydroponics_farms_complex
	add_building = building_mineral_purification_complex
	add_building = building_mineral_purification_complex
	add_building = building_multidimensional_printers
	add_building = building_multidimensional_printers
	add_building = building_leisure_complex
	add_building = building_leisure_complex
	add_building = building_distillation_complex
	add_building = building_chemical_complex
	add_building = building_synthesizers_complex
	while = {
		count = 5
		add_district = district_farming
	}
	while = {
		count = 10
		add_district = district_mining
	}
	while = {
		count = 10
		add_district = district_generator
	}

	while = {
		count = 50
		create_pop = {
			species = owner_main_species
			ethos = { ethic = ethic_fanatic_authoritarian }
		}
	}

	create_species = {
		name = random
		class = random_non_machine
		portrait = random
		homeworld = THIS
		traits = {
			trait = trait_survivor
			trait = trait_robust
			trait = trait_nerve_stapled
		}
	}
	last_created_species = {
		save_event_target_as = ps_authoritarian_servile_species
	}
	while = {
		count = 200
		create_pop = {
			species = event_target:ps_authoritarian_servile_species
			ethos = { ethic = ethic_fanatic_authoritarian }
		}
	}

	event_target:target_ps_authoritarian = { country_event = { id = ps.999 days = 1 } }
}

# Create Militarist Planet-State. Called from planet scope.
create_planet_state_militarist = {
	# Set Planet Size and Class
	prevent_anomaly = yes
	set_planet_size = 25
	change_pc = pc_city

	# Create Species and Country
	create_species = {
		name = random
		class = random_non_machine
		portrait = random
		traits = {
			trait = trait_venerable
			trait = trait_erudite
		}
	}
	create_country = {
		name = random
		type = planet_state
		authority = "auth_democratic"
		civics = random
		species = last_created
		flag = random
		ethos = {
			ethic = ethic_fanatic_militarist
		}
		ignore_initial_colony_error = yes
	}

	# Create Station and Leader
	last_created_country = {
		set_country_flag = ps_militarist
		save_event_target_as = target_ps_militarist
		create_fleet = {
			name = "NAME_PS_Militarist_Fleet"
			settings = { spawn_debris = no }
			effect = {
				set_owner = prev
				create_ship = {
					name = random
					design = "NAME_Planet_State_Station"
					graphical_culture = prev
				}
				set_location = {
					target = prevprev
					angle = random
					distance = 15
				}
			}
		}
		create_leader = {
			class = ruler
			species = prev
			name = random
			skill = 5
		}
		set_leader = last_created_leader
	}

	# Set Planet-State as Owner of the planet
	set_owner = event_target:target_ps_militarist
	set_controller = event_target:target_ps_militarist
	set_capital = yes

	# Add Builings, Districts, Pops
	add_building = building_planet_state_capitol
	add_building = building_hall_judgment
	add_building = building_anti_matter_reactor
	add_building = building_hydroponics_farms_complex
	add_building = building_hydroponics_farms_complex
	add_building = building_mineral_purification_complex
	add_building = building_mineral_purification_complex
	add_building = building_multidimensional_printers
	add_building = building_multidimensional_printers
	add_building = building_leisure_complex
	add_building = building_leisure_complex
	add_building = building_distillation_complex
	add_building = building_chemical_complex
	add_building = building_synthesizers_complex
	add_building = building_galactic_stock_exchange
	add_building = building_autocurating_vault
	while = {
		count = 25
		add_district = district_arcology_housing
	}
	while = {
		count = 400
		create_pop = {
			species = owner_main_species
			ethos = { ethic = ethic_fanatic_militarist }
		}
	}

	event_target:target_ps_militarist = {
		set_policy = {
			policy = food_policy
			option = food_policy_generous
			cooldown = no
		}
		set_policy = {
			policy = purge
			option = purge_not_allowed
			cooldown = no
		}
		set_policy = {
			policy = resettlement
			option = resettlement_not_allowed
			cooldown = no
		}
	}
}

# Create Pacifist Planet-State. Called from planet scope.
create_planet_state_pacifist = {
	# Set Planet Size and Class
	prevent_anomaly = yes
	set_planet_size = 25
	change_pc = pc_city

	# Create Species and Country
	create_species = {
		name = random
		class = random_non_machine
		portrait = random
		traits = {
			trait = trait_venerable
			trait = trait_erudite
		}
	}
	create_country = {
		name = random
		type = planet_state
		authority = "auth_democratic"
		civics = random
		species = last_created
		flag = random
		ethos = {
			ethic = ethic_fanatic_pacifist
		}
		ignore_initial_colony_error = yes
	}

	# Create Station and Leader
	last_created_country = {
		set_country_flag = ps_pacifist
		save_event_target_as = target_ps_pacifist
		create_fleet = {
			name = "NAME_PS_Pacifist_Fleet"
			settings = { spawn_debris = no }
			effect = {
				set_owner = prev
				create_ship = {
					name = random
					design = "NAME_Planet_State_Station"
					graphical_culture = prev
				}
				set_location = {
					target = prevprev
					angle = random
					distance = 15
				}
			}
		}
		create_leader = {
			class = ruler
			species = prev
			name = random
			skill = 5
		}
		set_leader = last_created_leader
	}

	# Set Planet-State as Owner of the planet
	set_owner = event_target:target_ps_pacifist
	set_controller = event_target:target_ps_pacifist
	set_capital = yes

	# Add Builings, Districts, Pops
	add_building = building_planet_state_capitol
	add_building = building_hall_judgment
	add_building = building_anti_matter_reactor
	add_building = building_hydroponics_farms_complex
	add_building = building_hydroponics_farms_complex
	add_building = building_mineral_purification_complex
	add_building = building_mineral_purification_complex
	add_building = building_multidimensional_printers
	add_building = building_multidimensional_printers
	add_building = building_leisure_complex
	add_building = building_leisure_complex
	add_building = building_distillation_complex
	add_building = building_chemical_complex
	add_building = building_synthesizers_complex
	add_building = building_galactic_stock_exchange
	add_building = building_autocurating_vault
	while = {
		count = 25
		add_district = district_arcology_housing
	}
	while = {
		count = 400
		create_pop = {
			species = owner_main_species
			ethos = { ethic = ethic_fanatic_pacifist }
		}
	}

	event_target:target_ps_pacifist = {
		set_policy = {
			policy = food_policy
			option = food_policy_generous
			cooldown = no
		}
		set_policy = {
			policy = purge
			option = purge_not_allowed
			cooldown = no
		}
		set_policy = {
			policy = resettlement
			option = resettlement_not_allowed
			cooldown = no
		}
	}
}

# Trade Deals
remove_ps_egalitarian_trade_deal = {
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_minerals_1 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_minerals_1
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_minerals_2 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_minerals_2
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_minerals_3 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_minerals_3
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_minerals_4 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_minerals_4
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_minerals_5 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_minerals_5
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_food_1 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_food_1
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_food_2 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_food_2
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_food_3 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_food_3
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_food_4 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_food_4
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_food_5 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_food_5
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_alloys_1 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_alloys_1
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_alloys_2 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_alloys_2
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_alloys_3 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_alloys_3
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_alloys_4 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_alloys_4
	}
	if = {
		limit = { has_modifier = modifier_ps_egaliatarian_trade_deal_alloys_5 }
		remove_modifier = modifier_ps_egaliatarian_trade_deal_alloys_5
	}
}
